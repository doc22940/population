{% extends "base.html" %}
{% block title %}Coverage{% endblock %}
{% block info %}{% endblock %}
{% block main %}
<p>
    OpenAddresses data is constantly improving through the efforts of our
    volunteer community. The table on this page shows the latest coverage
    details on a country-by-country basis.
</p>
<dl>
    <dt>Land Area</dt>
    <dd>
        <a href="https://github.com/openaddresses/openaddresses/blob/master/CONTRIBUTING.md#coverage-object">Source coverage information</a>
        is given as ISO 3166 codes, U.S. FIPS codes, or simple point and polygon geometries.
    </dd>
    <dt>Address Density</dt>
    <dd>
        We compare raw counts of address points in each country to
        <a href="#gpwv4">Gridded Population of the World (GPWv4)</a> adjusted
        population numbers at 0.1°&times;0.1° spatial resolution with standard
        deviation provided.
    </dd>
</dl>
<style lang="text/css">

    #coverage { border-collapse: collapse }
    
    #coverage tr th,
    #coverage tr td small
    {
        font-size: 65%;
    }
    
    #coverage tr th, #coverage tr td
    {
        text-align: left;
        padding: 3px 10px;
        border: none;
    }
    
    #coverage tr th
    {
        padding-top: 2em;
    }
    
    #coverage tr:nth-child(2n+0)>* { background-color: #f8f8f8 }
    #coverage tr:nth-child(2n+1)>* { background-color: #ffffff }

</style>
<table id="coverage">
    {% for areas in [best_areas, okay_areas, empty_areas] %}
        <tr>
            <th>Country</th>
            <th>ISO</th>
            <th>Land Area Covered</th>
            <th>Population in Land Area</th>
            <th>Address Density per 1,000 People</th>
        </tr>
        {% for area in areas %}
            <tr>
                <td>{{ area.iso_a2|nice_flag|safe }} {{ area.name }}</td>
                <td><code>{{ area.iso_a2 }}</code></td>
                <td>
                    {{ area.area_pct|nice_percentage }}
                    <small>({{ area.area_total|nice_big_number }} km²)</small>
                </td>
                <td>
                    {{ area.pop_pct|nice_percentage }}
                    <small>({{ area.pop_total|nice_big_number }} people)</small>
                </td>
                <td>
                    {% if area.cpp_avg %}
                    {{ (1000 * area.cpp_avg)|nice_integer }}
                    <small>±{{ (1000 * area.cpp_stddev)|nice_integer }}</small>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    {% endfor %}
</table>
<h3 id="gpwv4">Gridded Population of the World (GPW), v4</h3>
<p>
    <a href="http://beta.sedac.ciesin.columbia.edu/data/collection/gpw-v4">The Gridded Population of the World (GPW) series</a>,
    now in its fourth version (GPWv4), models the distribution of human
    population (counts and densities) on a continuous global surface. Since the
    release of the first version of this global population grid in 1995, the
    essential inputs have been population census tables and corresponding
    geographic boundaries. For GPWv4, population input data are collected at the
    most detailed spatial resolution available from the results of the 2010
    round of censuses, which occurred between 2005 and 2014.
</p>
<figure>
    <figcaption>CC-BY 2016, Trustees of Columbia University in the City of New York</figcaption>
    <img src="{{ url_for('static', filename='GPWv4.png') }}" width="100%">
</figure>
{% endblock main %}
